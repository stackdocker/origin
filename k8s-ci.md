Set up Kubernetes and Openshift Developement Environment 设置Kuberentes和Openshift开发环境
========================================================

This is a demo on MacOS

Prerequisites 预备
-------------

Wont do these if directly woking on host (not using VM)

### Install VBox  安装Virtual Box


### Install Vagrant  安装Vagrant


Power up Fedora Openshift Dev VM  准备Openshift开发环境的虚拟机
--------------------------------

### Clone Kubernetes Project

Fork [kubernetes at Github](https://github.com/kubernetes/kubernetes)

克隆到本地主机

    localhost:~ fanhongling$ git clone --depth=1 https://github.com/<your sign>/kubernetes Downloads/workspace/src/k8s.io/kubernetes
    
    localhost:~ fanhongling$ cd Downloads/workspace/src/k8s.io/kubernetes
    
    fanhonglingdeMacBook-Pro:origin fanhongling$ git remote add upstream https://github.com/kubernetes/kubernetes
    
    fanhonglingdeMacBook-Pro:origin fanhongling$ git config user.name "your sign"
    
    fanhonglingdeMacBook-Pro:origin fanhongling$ git config user.email "your mail address"

以后如果更新Kubernetes，执行

    fanhonglingdeMacBook-Pro:origin fanhongling$ git pull upstream master

推送到个人远程仓库，执行

    fanhonglingdeMacBook-Pro:origin fanhongling$ git push origin master
    
### Clone Etcd and Openshift as well

Like previous working

### Power up VM

Modify configuration relation of Vagrantfile  修改Vagrant配置



Power up

    fanhonglingdeMacBook-Pro:origin fanhongling$ vagrant up

SSH login (password is same as user name)

    fanhonglingdeMacBook-Pro:origin fanhongling$ ssh vagrant@172.17.4.50
    vagrant@172.17.4.50's password: **vagrant**
    Last login: Thu Jul 14 14:59:08 2016 from 172.17.4.1
    [vagrant@localhost ~]$

### Optional 

Some essential Docker images

    [vagrant@localhost origin]$ docker pull gcr.io/google_containers/kubedns-amd64:1.3

    [vagrant@localhost etcd]$ docker pull gcr.io/google_containers/kube-dnsmasq-amd64:1.3

    [vagrant@localhost etcd]$ docker pull gcr.io/google_containers/exechealthz-amd64:1.0

    [vagrant@localhost etcd]$ docker pull gcr.io/google_containers/kubernetes-dashboard-amd64:v1.1.0

Also, if you wont build from source, pull release directly

    [vagrant@localhost origin]$ docker pull gcr.io/google_containers/hyperkube-amd64:v1.4.0-alpha.1

    [vagrant@localhost kubernetes]$ docker pull gcr.io/google_containers/kube-cross:v1.6.2-2

Install GNU *make* Utility if directly working on host (not using VM) 

Command such as:


Make Etcd
---------

### v3


### v2


Make Kubernetes binaries
------------------------

Linux command:

    [vagrant@localhost kubernetes]$ make all GOFLAGS=-v
    Go version: go version go1.6.2 linux/amd64
    +++ [0715 22:02:59] Building the toolchain targets:
        k8s.io/kubernetes/hack/cmd/teststale
    +++ [0715 22:02:59] Building go targets for linux/amd64:
        cmd/kube-dns
        cmd/kube-proxy
        cmd/kube-apiserver
        cmd/kube-controller-manager
        cmd/kubelet
        cmd/kubemark
        cmd/hyperkube
        federation/cmd/federation-apiserver
        federation/cmd/federation-controller-manager
        plugin/cmd/kube-scheduler
        cmd/kubectl
        cmd/gendocs
        cmd/genkubedocs
        cmd/genman
        cmd/genyaml
        cmd/mungedocs
        cmd/genswaggertypedocs
        cmd/linkcheck
        examples/k8petstore/web-server/src
        federation/cmd/genfeddocs
        vendor/github.com/onsi/ginkgo/ginkgo
        test/e2e/e2e.test
        test/e2e_node/e2e_node.test
    +++ [0715 22:02:59] +++ Warning: stdlib pkg with cgo flag not found.
    +++ [0715 22:02:59] +++ Warning: stdlib pkg cannot be rebuilt since /opt/go/pkg is not writable by vagrant
    +++ [0715 22:02:59] +++ Warning: Make /opt/go/pkg writable for vagrant for a one-time stdlib install, Or
    +++ [0715 22:02:59] +++ Warning: Rebuild stdlib using the command 'CGO_ENABLED=0 go install -a -installsuffix cgo std'
    +++ [0715 22:02:59] +++ Falling back to go build, which is slower
        net
    
    ...
    
    *
    +++ [0715 22:42:13] Placing binaries

If make single only

*kubectl*

    [vagrant@localhost kubernetes]$ make WHAT=cmd/kubectl GOFLAGS=-v
    
    ...
    
    Go version: go version go1.6.2 linux/amd64
    +++ [0716 10:18:22] Building the toolchain targets:
        k8s.io/kubernetes/hack/cmd/teststale
    +++ [0716 10:18:22] Building go targets for linux/amd64:
        cmd/kubectl
    +++ [0716 10:18:22] +++ Warning: stdlib pkg with cgo flag not found.
    +++ [0716 10:18:22] +++ Warning: stdlib pkg cannot be rebuilt since /opt/go/pkg is not writable by vagrant
    +++ [0716 10:18:22] +++ Warning: Make /opt/go/pkg writable for vagrant for a one-time stdlib install, Or
    +++ [0716 10:18:22] +++ Warning: Rebuild stdlib using the command 'CGO_ENABLED=0 go install -a -installsuffix cgo std'
    +++ [0716 10:18:22] +++ Falling back to go build, which is slower
    
    ...
    
    *
    +++ [0716 10:20:26] Placing binaries
    [vagrant@localhost kubernetes]$ _output/bin/kubectl version --client
    Client Version: version.Info{Major:"1", Minor:"4+", GitVersion:"v1.4.0-alpha.1.209+03be7117a486c4", GitCommit:"03be7117a486c49dab54d8daf929f7cf7d198a3a", GitTreeState:"clean", BuildDate:"2016-07-16T10:18:22Z", GoVersion:"go1.6.2", Compiler:"gc", Platform:"linux/amd64"}

*kubelet*

    [vagrant@localhost kubernetes]$ make WHAT=cmd/kubelet GOFLAGS=-v
    Go version: go version go1.6.2 linux/amd64
    +++ [0716 10:23:12] Building the toolchain targets:
        k8s.io/kubernetes/hack/cmd/teststale
    +++ [0716 10:23:12] Building go targets for linux/amd64:
        cmd/kubelet
    k8s.io/kubernetes/vendor/github.com/spf13/cobra
    
    ...
    
    +++ [0716 10:27:01] Placing binaries
    [vagrant@localhost kubernetes]$ _output/bin/kubelet --version
    Kubernetes v1.4.0-alpha.1.209+03be7117a486c4

Build Hyperkube Docker image
----------------------------

Notice, if cloud not connect Internet and developement site from Google, the work wont go

    [vagrant@localhost kubernetes]$ build/run.sh make build
    +++ [0714 17:27:50] Verifying Prerequisites....
    +++ [0714 17:27:55] Building Docker image kube-build:build-39e6d913eb
    +++ Docker build command failed for kube-build:build-39e6d913eb
    
    Sending build context to Docker daemon 28.05 MB
    Step 1 : FROM gcr.io/google_containers/kube-cross:v1.6.2-2
    Trying to pull repository gcr.io/google_containers/kube-cross ... failed
    unable to ping registry endpoint https://gcr.io/v0/
    v2 ping attempt failed with error: Get https://gcr.io/v2/: dial tcp 173.194.72.82:443: i/o timeout
     v1 ping attempt failed with error: Get https://gcr.io/v1/_ping: dial tcp 173.194.72.82:443: i/o timeout
    
    To retry manually, run:
    
    docker build -t kube-build:build-39e6d913eb --pull=false /data/src/k8s.io/kubernetes/_output/images/kube-build:build-39e6d913eb
    
    !!! Error in build/../build/common.sh:535
      'return 1' exited with status 1
    Call stack:
      1: build/../build/common.sh:535 kube::build::build_image(...)
      2: build/run.sh:29 main(...)
    Exiting with status 1

Successful way

    [vagrant@localhost hyperkube]$ make build VERSION=v1.4.0-ci ARCH=amd64
    cp -r ./* /tmp/tmp.aZToDGshGx
    mkdir -p /tmp/tmp.aZToDGshGx/cni /tmp/tmp.aZToDGshGx/addons
    cp ../../saltbase/salt/helpers/safe_format_and_mount /tmp/tmp.aZToDGshGx
    cp ../../saltbase/salt/generate-cert/make-ca-cert.sh /tmp/tmp.aZToDGshGx
    cp ../../saltbase/salt/kube-dns/skydns-rc.yaml.base /tmp/tmp.aZToDGshGx/addons/skydns-rc.yaml
    cp ../../saltbase/salt/kube-dns/skydns-svc.yaml.base /tmp/tmp.aZToDGshGx/addons/skydns-svc.yaml
    cp ../../addons/dashboard/dashboard-controller.yaml /tmp/tmp.aZToDGshGx/addons
    cp ../../addons/dashboard/dashboard-service.yaml /tmp/tmp.aZToDGshGx/addons
    # TODO: Move out kube-proxy to a DaemonSet again
    #cp kube-proxy-ds.yaml /tmp/tmp.aZToDGshGx/addons/kube-proxy.yaml
    cp ../../../_output/dockerized/bin/linux/amd64/hyperkube /tmp/tmp.aZToDGshGx
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|VERSION|v1.4.0-ci|g" addons/*.yaml static-pods/*.json
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|REGISTRY|gcr.io/google_containers|g" addons/*.yaml static-pods/*.json
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|ARCH|amd64|g" addons/*.yaml static-pods/*.json
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|ARCH||g" Dockerfile
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|BASEIMAGE|debian:jessie|g" Dockerfile
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|-amd64|-amd64|g" addons/*.yaml
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|__PILLAR__DNS__REPLICAS__|1|g;s|__PILLAR__DNS__SERVER__|10.0.0.10|g;" addons/skydns*.yaml
    cd /tmp/tmp.aZToDGshGx && sed -i.back "s|__PILLAR__DNS__DOMAIN__|cluster.local|g;s|__PILLAR__FEDERATIONS__DOMAIN__MAP__||g;" addons/skydns*.yaml
    rm /tmp/tmp.aZToDGshGx/addons/*.back
    # Make scripts executable before they are copied into the Docker image. If we make them executable later, in another layer
    # they'll take up twice the space because the new executable binary differs from the old one, but everything is cached in layers.
    cd /tmp/tmp.aZToDGshGx && chmod a+rx \
    	hyperkube \
    	safe_format_and_mount \
    	setup-files.sh \
    	make-ca-cert.sh \
    	copy-addons.sh
    # When building "normally" for amd64, remove the whole line, it has no part in the amd64 image
    cd /tmp/tmp.aZToDGshGx && sed -i "/CROSS_BUILD_/d" Dockerfile
    # Download CNI
    curl -sSL --retry 5 https://storage.googleapis.com/kubernetes-release/network-plugins/cni-8a936732094c0941e1543ef5d292a1f4fffa1ac5.tar.gz | tar -xz -C /tmp/tmp.aZToDGshGx/cni
    docker build -t gcr.io/google_containers/hyperkube-amd64:v1.4.0-ci /tmp/tmp.aZToDGshGx
    Sending build context to Docker daemon 187.2 MB
    Step 1 : FROM debian:jessie
    Trying to pull repository docker.io/library/debian ... jessie: Pulling from library/debian
    f854eed3f31f: Pull complete 
    Digest: sha256:4e66bc1b7080626816e38e71deee68ab93206ab32eebc01a6a46d852a2f7b69c
    Status: Downloaded newer image for docker.io/debian:jessie
    
     ---> f854eed3f31f
    Step 2 : RUN DEBIAN_FRONTEND=noninteractive apt-get update -y     && DEBIAN_FRONTEND=noninteractive apt-get -yy -q install     iptables     ethtool     ca-certificates     conntrack     file     util-linux     socat     curl     git     && DEBIAN_FRONTEND=noninteractive apt-get upgrade -y     && DEBIAN_FRONTEND=noninteractive apt-get autoremove -y     && DEBIAN_FRONTEND=noninteractive apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
     ---> Running in 658fff4eca08
    Get:1 http://security.debian.org jessie/updates InRelease [63.1 kB]
    Get:2 http://security.debian.org jessie/updates/main amd64 Packages [368 kB]
    Ign http://httpredir.debian.org jessie InRelease
    Get:3 http://httpredir.debian.org jessie-updates InRelease [142 kB]
    Get:4 http://httpredir.debian.org jessie Release.gpg [2373 B]
    Get:5 http://httpredir.debian.org jessie-updates/main amd64 Packages [17.6 kB]
    Get:6 http://httpredir.debian.org jessie Release [148 kB]
    Get:7 http://httpredir.debian.org jessie/main amd64 Packages [9032 kB]
    Fetched 9773 kB in 4min 37s (35.2 kB/s)
    Reading package lists...
    Reading package lists...
    Building dependency tree...
    util-linux is already the newest version.
    The following extra packages will be installed:
      git-man krb5-locales less libalgorithm-c3-perl libarchive-extract-perl
      libbsd0 libcgi-fast-perl libcgi-pm-perl libclass-c3-perl libclass-c3-xs-perl
      libcpan-meta-perl libcurl3 libcurl3-gnutls libdata-optlist-perl
      libdata-section-perl libedit2 liberror-perl libexpat1 libfcgi-perl libffi6
      libgdbm3 libgmp10 libgnutls-deb0-28 libgssapi-krb5-2 libhogweed2 libidn11
      libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
      liblog-message-perl liblog-message-simple-perl libmagic1 libmnl0
      libmodule-build-perl libmodule-pluggable-perl libmodule-signature-perl
      libmro-compat-perl libnetfilter-conntrack3 libnettle4 libnfnetlink0
      libp11-kit0 libpackage-constants-perl libparams-util-perl libpod-latex-perl
      libpod-readme-perl libpopt0 libregexp-common-perl librtmp1 libsasl2-2
      libsasl2-modules libsasl2-modules-db libsoftware-license-perl libssh2-1
      libssl1.0.0 libsub-exporter-perl libsub-install-perl libtasn1-6
      libterm-ui-perl libtext-soundex-perl libtext-template-perl libwrap0 libx11-6
      libx11-data libxau6 libxcb1 libxdmcp6 libxext6 libxmuu1 libxtables10
      openssh-client openssl patch perl perl-modules rename rsync tcpd xauth
    Suggested packages:
      gettext-base git-daemon-run git-daemon-sysvinit git-doc git-el git-email
      git-gui gitk gitweb git-arch git-cvs git-mediawiki git-svn gnutls-bin
      krb5-doc krb5-user libsasl2-modules-otp libsasl2-modules-ldap
      libsasl2-modules-sql libsasl2-modules-gssapi-mit
      libsasl2-modules-gssapi-heimdal ssh-askpass libpam-ssh keychain monkeysphere
      ed diffutils-doc perl-doc libterm-readline-gnu-perl
      libterm-readline-perl-perl make libb-lint-perl libcpanplus-dist-build-perl
      libcpanplus-perl libfile-checktree-perl libobject-accessor-perl
      openssh-server
    Recommended packages:
      ssh-client libarchive-tar-perl
    The following NEW packages will be installed:
      ca-certificates conntrack curl ethtool file git git-man iptables
      krb5-locales less libalgorithm-c3-perl libarchive-extract-perl libbsd0
      libcgi-fast-perl libcgi-pm-perl libclass-c3-perl libclass-c3-xs-perl
      libcpan-meta-perl libcurl3 libcurl3-gnutls libdata-optlist-perl
      libdata-section-perl libedit2 liberror-perl libexpat1 libfcgi-perl libffi6
      libgdbm3 libgmp10 libgnutls-deb0-28 libgssapi-krb5-2 libhogweed2 libidn11
      libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
      liblog-message-perl liblog-message-simple-perl libmagic1 libmnl0
      libmodule-build-perl libmodule-pluggable-perl libmodule-signature-perl
      libmro-compat-perl libnetfilter-conntrack3 libnettle4 libnfnetlink0
      libp11-kit0 libpackage-constants-perl libparams-util-perl libpod-latex-perl
      libpod-readme-perl libpopt0 libregexp-common-perl librtmp1 libsasl2-2
      libsasl2-modules libsasl2-modules-db libsoftware-license-perl libssh2-1
      libssl1.0.0 libsub-exporter-perl libsub-install-perl libtasn1-6
      libterm-ui-perl libtext-soundex-perl libtext-template-perl libwrap0 libx11-6
      libx11-data libxau6 libxcb1 libxdmcp6 libxext6 libxmuu1 libxtables10
      openssh-client openssl patch perl perl-modules rename rsync socat tcpd xauth
    0 upgraded, 88 newly installed, 0 to remove and 1 not upgraded.
    Need to get 23.2 MB of archives.
    After this operation, 96.0 MB of additional disk space will be used.
    Get:1 http://security.debian.org/ jessie/updates/main libexpat1 amd64 2.1.0-6+deb8u3 [80.0 kB]
    Get:2 http://httpredir.debian.org/debian/ jessie/main libgdbm3 amd64 1.8.3-13.1 [30.0 kB]
    Get:3 http://httpredir.debian.org/debian/ jessie/main libpopt0 amd64 1.16-10 [49.2 kB]
    Get:4 http://httpredir.debian.org/debian/ jessie/main libssl1.0.0 amd64 1.0.1t-1+deb8u2 [1045 kB]
    Get:5 http://httpredir.debian.org/debian/ jessie/main libbsd0 amd64 0.7.0-2 [67.9 kB]
    Get:6 http://httpredir.debian.org/debian/ jessie/main libedit2 amd64 3.1-20140620-2 [85.1 kB]
    Get:7 http://httpredir.debian.org/debian/ jessie/main libgmp10 amd64 2:6.0.0+dfsg-6 [253 kB]
    Get:8 http://httpredir.debian.org/debian/ jessie/main libnettle4 amd64 2.7.1-5+deb8u1 [176 kB]
    Get:9 http://httpredir.debian.org/debian/ jessie/main libhogweed2 amd64 2.7.1-5+deb8u1 [126 kB]
    Get:10 http://httpredir.debian.org/debian/ jessie/main libffi6 amd64 3.1-2+b2 [20.1 kB]
    Get:11 http://httpredir.debian.org/debian/ jessie/main libp11-kit0 amd64 0.20.7-1 [81.2 kB]
    Get:12 http://httpredir.debian.org/debian/ jessie/main libtasn1-6 amd64 4.2-3+deb8u2 [49.0 kB]
    Get:13 http://httpredir.debian.org/debian/ jessie/main libgnutls-deb0-28 amd64 3.3.8-6+deb8u3 [694 kB]
    Get:14 http://httpredir.debian.org/debian/ jessie/main libkeyutils1 amd64 1.5.9-5+b1 [12.0 kB]
    Get:15 http://httpredir.debian.org/debian/ jessie/main libkrb5support0 amd64 1.12.1+dfsg-19+deb8u2 [59.1 kB]
    Get:16 http://httpredir.debian.org/debian/ jessie/main libk5crypto3 amd64 1.12.1+dfsg-19+deb8u2 [115 kB]
    Get:17 http://httpredir.debian.org/debian/ jessie/main libkrb5-3 amd64 1.12.1+dfsg-19+deb8u2 [303 kB]
    Get:18 http://httpredir.debian.org/debian/ jessie/main libgssapi-krb5-2 amd64 1.12.1+dfsg-19+deb8u2 [152 kB]
    Get:19 http://httpredir.debian.org/debian/ jessie/main libidn11 amd64 1.29-1+deb8u1 [136 kB]
    Get:20 http://httpredir.debian.org/debian/ jessie/main libsasl2-modules-db amd64 2.1.26.dfsg1-13+deb8u1 [67.1 kB]
    Get:21 http://httpredir.debian.org/debian/ jessie/main libsasl2-2 amd64 2.1.26.dfsg1-13+deb8u1 [105 kB]
    Get:22 http://httpredir.debian.org/debian/ jessie/main libldap-2.4-2 amd64 2.4.40+dfsg-1+deb8u2 [218 kB]
    Get:23 http://httpredir.debian.org/debian/ jessie/main libmagic1 amd64 1:5.22+15-2+deb8u1 [249 kB]
    Get:24 http://httpredir.debian.org/debian/ jessie/main libwrap0 amd64 7.6.q-25 [58.5 kB]
    Get:25 http://httpredir.debian.org/debian/ jessie/main perl-modules all 5.20.2-3+deb8u5 [2546 kB]
    Get:26 http://httpredir.debian.org/debian/ jessie/main perl amd64 5.20.2-3+deb8u5 [2655 kB]
    Get:27 http://httpredir.debian.org/debian/ jessie/main librtmp1 amd64 2.4+20150115.gita107cef-1 [59.8 kB]
    Get:28 http://httpredir.debian.org/debian/ jessie/main libssh2-1 amd64 1.4.3-4.1+deb8u1 [125 kB]
    Get:29 http://httpredir.debian.org/debian/ jessie/main libcurl3 amd64 7.38.0-4+deb8u3 [259 kB]
    Get:30 http://httpredir.debian.org/debian/ jessie/main libcurl3-gnutls amd64 7.38.0-4+deb8u3 [251 kB]
    Get:31 http://httpredir.debian.org/debian/ jessie/main libnfnetlink0 amd64 1.0.1-3 [13.5 kB]
    Get:32 http://httpredir.debian.org/debian/ jessie/main libxau6 amd64 1:1.0.8-1 [20.7 kB]
    Get:33 http://httpredir.debian.org/debian/ jessie/main libxdmcp6 amd64 1:1.1.1-1+b1 [24.9 kB]
    Get:34 http://httpredir.debian.org/debian/ jessie/main libxcb1 amd64 1.10-3+b1 [44.4 kB]
    Get:35 http://httpredir.debian.org/debian/ jessie/main libx11-data all 2:1.6.2-3 [126 kB]
    Get:36 http://httpredir.debian.org/debian/ jessie/main libx11-6 amd64 2:1.6.2-3 [729 kB]
    Get:37 http://httpredir.debian.org/debian/ jessie/main libxext6 amd64 2:1.3.3-1 [52.7 kB]
    Get:38 http://httpredir.debian.org/debian/ jessie/main libxmuu1 amd64 2:1.1.2-1 [23.3 kB]
    Get:39 http://httpredir.debian.org/debian/ jessie/main libmnl0 amd64 1.0.3-5 [12.0 kB]
    Get:40 http://httpredir.debian.org/debian/ jessie/main libnetfilter-conntrack3 amd64 1.0.4-1 [36.8 kB]
    Get:41 http://httpredir.debian.org/debian/ jessie/main libxtables10 amd64 1.4.21-2+b1 [67.6 kB]
    Get:42 http://httpredir.debian.org/debian/ jessie/main iptables amd64 1.4.21-2+b1 [277 kB]
    Get:43 http://httpredir.debian.org/debian/ jessie/main less amd64 458-3 [124 kB]
    Get:44 http://httpredir.debian.org/debian/ jessie/main file amd64 1:5.22+15-2+deb8u1 [60.4 kB]
    Get:45 http://httpredir.debian.org/debian/ jessie/main krb5-locales all 1.12.1+dfsg-19+deb8u2 [2649 kB]
    Get:46 http://httpredir.debian.org/debian/ jessie/main openssh-client amd64 1:6.7p1-5+deb8u2 [691 kB]
    Get:47 http://httpredir.debian.org/debian/ jessie/main patch amd64 2.7.5-1 [109 kB]
    Get:48 http://httpredir.debian.org/debian/ jessie/main openssl amd64 1.0.1t-1+deb8u2 [664 kB]
    Get:49 http://httpredir.debian.org/debian/ jessie/main ca-certificates all 20141019+deb8u1 [204 kB]
    Get:50 http://httpredir.debian.org/debian/ jessie/main conntrack amd64 1:1.4.2-2+deb8u1 [27.5 kB]
    Get:51 http://httpredir.debian.org/debian/ jessie/main curl amd64 7.38.0-4+deb8u3 [200 kB]
    Get:52 http://httpredir.debian.org/debian/ jessie/main ethtool amd64 1:3.16-1 [94.9 kB]
    Get:53 http://httpredir.debian.org/debian/ jessie/main liberror-perl all 0.17-1.1 [22.4 kB]
    Get:54 http://httpredir.debian.org/debian/ jessie/main git-man all 1:2.1.4-2.1+deb8u2 [1267 kB]
    Get:55 http://httpredir.debian.org/debian/ jessie/main git amd64 1:2.1.4-2.1+deb8u2 [3262 kB]
    Get:56 http://httpredir.debian.org/debian/ jessie/main libalgorithm-c3-perl all 0.09-1 [11.9 kB]
    Get:57 http://httpredir.debian.org/debian/ jessie/main libarchive-extract-perl all 0.72-1 [24.8 kB]
    Get:58 http://httpredir.debian.org/debian/ jessie/main libcgi-pm-perl all 4.09-1 [213 kB]
    Get:59 http://httpredir.debian.org/debian/ jessie/main libfcgi-perl amd64 0.77-1+b1 [39.1 kB]
    Get:60 http://httpredir.debian.org/debian/ jessie/main libcgi-fast-perl all 1:2.04-1 [10.9 kB]
    Get:61 http://httpredir.debian.org/debian/ jessie/main libclass-c3-perl all 0.26-1 [22.9 kB]
    Get:62 http://httpredir.debian.org/debian/ jessie/main libclass-c3-xs-perl amd64 0.13-2+b1 [15.2 kB]
    Get:63 http://httpredir.debian.org/debian/ jessie/main libcpan-meta-perl all 2.142690-1 [125 kB]
    Get:64 http://httpredir.debian.org/debian/ jessie/main libparams-util-perl amd64 1.07-2+b1 [23.5 kB]
    Get:65 http://httpredir.debian.org/debian/ jessie/main libsub-install-perl all 0.928-1 [11.4 kB]
    Get:66 http://httpredir.debian.org/debian/ jessie/main libdata-optlist-perl all 0.109-1 [10.6 kB]
    Get:67 http://httpredir.debian.org/debian/ jessie/main libmro-compat-perl all 0.12-1 [13.2 kB]
    Get:68 http://httpredir.debian.org/debian/ jessie/main libsub-exporter-perl all 0.986-1 [49.9 kB]
    Get:69 http://httpredir.debian.org/debian/ jessie/main libdata-section-perl all 0.200006-1 [13.4 kB]
    Get:70 http://httpredir.debian.org/debian/ jessie/main liblog-message-perl all 0.8-1 [26.0 kB]
    Get:71 http://httpredir.debian.org/debian/ jessie/main liblog-message-simple-perl all 0.10-2 [8126 B]
    Get:72 http://httpredir.debian.org/debian/ jessie/main libmodule-build-perl all 0.421000-2 [265 kB]
    Get:73 http://httpredir.debian.org/debian/ jessie/main libmodule-pluggable-perl all 5.1-1 [25.0 kB]
    Get:74 http://httpredir.debian.org/debian/ jessie/main libmodule-signature-perl all 0.73-1+deb8u2 [30.4 kB]
    Get:75 http://httpredir.debian.org/debian/ jessie/main libpackage-constants-perl all 0.04-1 [5820 B]
    Get:76 http://httpredir.debian.org/debian/ jessie/main libpod-latex-perl all 0.61-1 [34.7 kB]
    Get:77 http://httpredir.debian.org/debian/ jessie/main libregexp-common-perl all 2013031301-1 [173 kB]
    Get:78 http://httpredir.debian.org/debian/ jessie/main libpod-readme-perl all 0.11-1 [15.3 kB]
    Get:79 http://httpredir.debian.org/debian/ jessie/main libsasl2-modules amd64 2.1.26.dfsg1-13+deb8u1 [101 kB]
    Get:80 http://httpredir.debian.org/debian/ jessie/main libtext-template-perl all 1.46-1 [53.1 kB]
    Get:81 http://httpredir.debian.org/debian/ jessie/main libsoftware-license-perl all 0.103010-3 [119 kB]
    Get:82 http://httpredir.debian.org/debian/ jessie/main libterm-ui-perl all 0.42-1 [19.1 kB]
    Get:83 http://httpredir.debian.org/debian/ jessie/main libtext-soundex-perl amd64 3.4-1+b2 [13.7 kB]
    Get:84 http://httpredir.debian.org/debian/ jessie/main rename all 0.20-3 [12.4 kB]
    Get:85 http://httpredir.debian.org/debian/ jessie/main rsync amd64 3.1.1-3 [390 kB]
    Get:86 http://httpredir.debian.org/debian/ jessie/main tcpd amd64 7.6.q-25 [22.9 kB]
    Get:87 http://httpredir.debian.org/debian/ jessie/main xauth amd64 1:1.0.9-1 [38.2 kB]
    Get:88 http://httpredir.debian.org/debian/ jessie/main socat amd64 1.7.2.4-2 [333 kB]
    debconf: delaying package configuration, since apt-utils is not installed
    Fetched 23.2 MB in 6min 16s (61.5 kB/s)
    Selecting previously unselected package libgdbm3:amd64.
    (Reading database ... 7548 files and directories currently installed.)
    Preparing to unpack .../libgdbm3_1.8.3-13.1_amd64.deb ...
    Unpacking libgdbm3:amd64 (1.8.3-13.1) ...
    Selecting previously unselected package libpopt0:amd64.
    Preparing to unpack .../libpopt0_1.16-10_amd64.deb ...
    Unpacking libpopt0:amd64 (1.16-10) ...
    Selecting previously unselected package libssl1.0.0:amd64.
    Preparing to unpack .../libssl1.0.0_1.0.1t-1+deb8u2_amd64.deb ...
    Unpacking libssl1.0.0:amd64 (1.0.1t-1+deb8u2) ...
    Selecting previously unselected package libbsd0:amd64.
    Preparing to unpack .../libbsd0_0.7.0-2_amd64.deb ...
    Unpacking libbsd0:amd64 (0.7.0-2) ...
    Selecting previously unselected package libedit2:amd64.
    Preparing to unpack .../libedit2_3.1-20140620-2_amd64.deb ...
    Unpacking libedit2:amd64 (3.1-20140620-2) ...
    Selecting previously unselected package libgmp10:amd64.
    Preparing to unpack .../libgmp10_2%3a6.0.0+dfsg-6_amd64.deb ...
    Unpacking libgmp10:amd64 (2:6.0.0+dfsg-6) ...
    Selecting previously unselected package libnettle4:amd64.
    Preparing to unpack .../libnettle4_2.7.1-5+deb8u1_amd64.deb ...
    Unpacking libnettle4:amd64 (2.7.1-5+deb8u1) ...
    Selecting previously unselected package libhogweed2:amd64.
    Preparing to unpack .../libhogweed2_2.7.1-5+deb8u1_amd64.deb ...
    Unpacking libhogweed2:amd64 (2.7.1-5+deb8u1) ...
    Selecting previously unselected package libffi6:amd64.
    Preparing to unpack .../libffi6_3.1-2+b2_amd64.deb ...
    Unpacking libffi6:amd64 (3.1-2+b2) ...
    Selecting previously unselected package libp11-kit0:amd64.
    Preparing to unpack .../libp11-kit0_0.20.7-1_amd64.deb ...
    Unpacking libp11-kit0:amd64 (0.20.7-1) ...
    Selecting previously unselected package libtasn1-6:amd64.
    Preparing to unpack .../libtasn1-6_4.2-3+deb8u2_amd64.deb ...
    Unpacking libtasn1-6:amd64 (4.2-3+deb8u2) ...
    Selecting previously unselected package libgnutls-deb0-28:amd64.
    Preparing to unpack .../libgnutls-deb0-28_3.3.8-6+deb8u3_amd64.deb ...
    Unpacking libgnutls-deb0-28:amd64 (3.3.8-6+deb8u3) ...
    Selecting previously unselected package libkeyutils1:amd64.
    Preparing to unpack .../libkeyutils1_1.5.9-5+b1_amd64.deb ...
    Unpacking libkeyutils1:amd64 (1.5.9-5+b1) ...
    Selecting previously unselected package libkrb5support0:amd64.
    Preparing to unpack .../libkrb5support0_1.12.1+dfsg-19+deb8u2_amd64.deb ...
    Unpacking libkrb5support0:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Selecting previously unselected package libk5crypto3:amd64.
    Preparing to unpack .../libk5crypto3_1.12.1+dfsg-19+deb8u2_amd64.deb ...
    Unpacking libk5crypto3:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Selecting previously unselected package libkrb5-3:amd64.
    Preparing to unpack .../libkrb5-3_1.12.1+dfsg-19+deb8u2_amd64.deb ...
    Unpacking libkrb5-3:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Selecting previously unselected package libgssapi-krb5-2:amd64.
    Preparing to unpack .../libgssapi-krb5-2_1.12.1+dfsg-19+deb8u2_amd64.deb ...
    Unpacking libgssapi-krb5-2:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Selecting previously unselected package libidn11:amd64.
    Preparing to unpack .../libidn11_1.29-1+deb8u1_amd64.deb ...
    Unpacking libidn11:amd64 (1.29-1+deb8u1) ...
    Selecting previously unselected package libsasl2-modules-db:amd64.
    Preparing to unpack .../libsasl2-modules-db_2.1.26.dfsg1-13+deb8u1_amd64.deb ...
    Unpacking libsasl2-modules-db:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Selecting previously unselected package libsasl2-2:amd64.
    Preparing to unpack .../libsasl2-2_2.1.26.dfsg1-13+deb8u1_amd64.deb ...
    Unpacking libsasl2-2:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Selecting previously unselected package libldap-2.4-2:amd64.
    Preparing to unpack .../libldap-2.4-2_2.4.40+dfsg-1+deb8u2_amd64.deb ...
    Unpacking libldap-2.4-2:amd64 (2.4.40+dfsg-1+deb8u2) ...
    Selecting previously unselected package libmagic1:amd64.
    Preparing to unpack .../libmagic1_1%3a5.22+15-2+deb8u1_amd64.deb ...
    Unpacking libmagic1:amd64 (1:5.22+15-2+deb8u1) ...
    Selecting previously unselected package libwrap0:amd64.
    Preparing to unpack .../libwrap0_7.6.q-25_amd64.deb ...
    Unpacking libwrap0:amd64 (7.6.q-25) ...
    Selecting previously unselected package perl-modules.
    Preparing to unpack .../perl-modules_5.20.2-3+deb8u5_all.deb ...
    Unpacking perl-modules (5.20.2-3+deb8u5) ...
    Selecting previously unselected package perl.
    Preparing to unpack .../perl_5.20.2-3+deb8u5_amd64.deb ...
    Unpacking perl (5.20.2-3+deb8u5) ...
    Selecting previously unselected package librtmp1:amd64.
    Preparing to unpack .../librtmp1_2.4+20150115.gita107cef-1_amd64.deb ...
    Unpacking librtmp1:amd64 (2.4+20150115.gita107cef-1) ...
    Selecting previously unselected package libssh2-1:amd64.
    Preparing to unpack .../libssh2-1_1.4.3-4.1+deb8u1_amd64.deb ...
    Unpacking libssh2-1:amd64 (1.4.3-4.1+deb8u1) ...
    Selecting previously unselected package libcurl3:amd64.
    Preparing to unpack .../libcurl3_7.38.0-4+deb8u3_amd64.deb ...
    Unpacking libcurl3:amd64 (7.38.0-4+deb8u3) ...
    Selecting previously unselected package libcurl3-gnutls:amd64.
    Preparing to unpack .../libcurl3-gnutls_7.38.0-4+deb8u3_amd64.deb ...
    Unpacking libcurl3-gnutls:amd64 (7.38.0-4+deb8u3) ...
    Selecting previously unselected package libexpat1:amd64.
    Preparing to unpack .../libexpat1_2.1.0-6+deb8u3_amd64.deb ...
    Unpacking libexpat1:amd64 (2.1.0-6+deb8u3) ...
    Selecting previously unselected package libnfnetlink0:amd64.
    Preparing to unpack .../libnfnetlink0_1.0.1-3_amd64.deb ...
    Unpacking libnfnetlink0:amd64 (1.0.1-3) ...
    Selecting previously unselected package libxau6:amd64.
    Preparing to unpack .../libxau6_1%3a1.0.8-1_amd64.deb ...
    Unpacking libxau6:amd64 (1:1.0.8-1) ...
    Selecting previously unselected package libxdmcp6:amd64.
    Preparing to unpack .../libxdmcp6_1%3a1.1.1-1+b1_amd64.deb ...
    Unpacking libxdmcp6:amd64 (1:1.1.1-1+b1) ...
    Selecting previously unselected package libxcb1:amd64.
    Preparing to unpack .../libxcb1_1.10-3+b1_amd64.deb ...
    Unpacking libxcb1:amd64 (1.10-3+b1) ...
    Selecting previously unselected package libx11-data.
    Preparing to unpack .../libx11-data_2%3a1.6.2-3_all.deb ...
    Unpacking libx11-data (2:1.6.2-3) ...
    Selecting previously unselected package libx11-6:amd64.
    Preparing to unpack .../libx11-6_2%3a1.6.2-3_amd64.deb ...
    Unpacking libx11-6:amd64 (2:1.6.2-3) ...
    Selecting previously unselected package libxext6:amd64.
    Preparing to unpack .../libxext6_2%3a1.3.3-1_amd64.deb ...
    Unpacking libxext6:amd64 (2:1.3.3-1) ...
    Selecting previously unselected package libxmuu1:amd64.
    Preparing to unpack .../libxmuu1_2%3a1.1.2-1_amd64.deb ...
    Unpacking libxmuu1:amd64 (2:1.1.2-1) ...
    Selecting previously unselected package libmnl0:amd64.
    Preparing to unpack .../libmnl0_1.0.3-5_amd64.deb ...
    Unpacking libmnl0:amd64 (1.0.3-5) ...
    Selecting previously unselected package libnetfilter-conntrack3:amd64.
    Preparing to unpack .../libnetfilter-conntrack3_1.0.4-1_amd64.deb ...
    Unpacking libnetfilter-conntrack3:amd64 (1.0.4-1) ...
    Selecting previously unselected package libxtables10.
    Preparing to unpack .../libxtables10_1.4.21-2+b1_amd64.deb ...
    Unpacking libxtables10 (1.4.21-2+b1) ...
    Selecting previously unselected package iptables.
    Preparing to unpack .../iptables_1.4.21-2+b1_amd64.deb ...
    Unpacking iptables (1.4.21-2+b1) ...
    Selecting previously unselected package less.
    Preparing to unpack .../archives/less_458-3_amd64.deb ...
    Unpacking less (458-3) ...
    Selecting previously unselected package file.
    Preparing to unpack .../file_1%3a5.22+15-2+deb8u1_amd64.deb ...
    Unpacking file (1:5.22+15-2+deb8u1) ...
    Selecting previously unselected package krb5-locales.
    Preparing to unpack .../krb5-locales_1.12.1+dfsg-19+deb8u2_all.deb ...
    Unpacking krb5-locales (1.12.1+dfsg-19+deb8u2) ...
    Selecting previously unselected package openssh-client.
    Preparing to unpack .../openssh-client_1%3a6.7p1-5+deb8u2_amd64.deb ...
    Unpacking openssh-client (1:6.7p1-5+deb8u2) ...
    Selecting previously unselected package patch.
    Preparing to unpack .../patch_2.7.5-1_amd64.deb ...
    Unpacking patch (2.7.5-1) ...
    Selecting previously unselected package openssl.
    Preparing to unpack .../openssl_1.0.1t-1+deb8u2_amd64.deb ...
    Unpacking openssl (1.0.1t-1+deb8u2) ...
    Selecting previously unselected package ca-certificates.
    Preparing to unpack .../ca-certificates_20141019+deb8u1_all.deb ...
    Unpacking ca-certificates (20141019+deb8u1) ...
    Selecting previously unselected package conntrack.
    Preparing to unpack .../conntrack_1%3a1.4.2-2+deb8u1_amd64.deb ...
    Unpacking conntrack (1:1.4.2-2+deb8u1) ...
    Selecting previously unselected package curl.
    Preparing to unpack .../curl_7.38.0-4+deb8u3_amd64.deb ...
    Unpacking curl (7.38.0-4+deb8u3) ...
    Selecting previously unselected package ethtool.
    Preparing to unpack .../ethtool_1%3a3.16-1_amd64.deb ...
    Unpacking ethtool (1:3.16-1) ...
    Selecting previously unselected package liberror-perl.
    Preparing to unpack .../liberror-perl_0.17-1.1_all.deb ...
    Unpacking liberror-perl (0.17-1.1) ...
    Selecting previously unselected package git-man.
    Preparing to unpack .../git-man_1%3a2.1.4-2.1+deb8u2_all.deb ...
    Unpacking git-man (1:2.1.4-2.1+deb8u2) ...
    Selecting previously unselected package git.
    Preparing to unpack .../git_1%3a2.1.4-2.1+deb8u2_amd64.deb ...
    Unpacking git (1:2.1.4-2.1+deb8u2) ...
    Selecting previously unselected package libalgorithm-c3-perl.
    Preparing to unpack .../libalgorithm-c3-perl_0.09-1_all.deb ...
    Unpacking libalgorithm-c3-perl (0.09-1) ...
    Selecting previously unselected package libarchive-extract-perl.
    Preparing to unpack .../libarchive-extract-perl_0.72-1_all.deb ...
    Unpacking libarchive-extract-perl (0.72-1) ...
    Selecting previously unselected package libcgi-pm-perl.
    Preparing to unpack .../libcgi-pm-perl_4.09-1_all.deb ...
    Unpacking libcgi-pm-perl (4.09-1) ...
    Selecting previously unselected package libfcgi-perl.
    Preparing to unpack .../libfcgi-perl_0.77-1+b1_amd64.deb ...
    Unpacking libfcgi-perl (0.77-1+b1) ...
    Selecting previously unselected package libcgi-fast-perl.
    Preparing to unpack .../libcgi-fast-perl_1%3a2.04-1_all.deb ...
    Unpacking libcgi-fast-perl (1:2.04-1) ...
    Selecting previously unselected package libclass-c3-perl.
    Preparing to unpack .../libclass-c3-perl_0.26-1_all.deb ...
    Unpacking libclass-c3-perl (0.26-1) ...
    Selecting previously unselected package libclass-c3-xs-perl.
    Preparing to unpack .../libclass-c3-xs-perl_0.13-2+b1_amd64.deb ...
    Unpacking libclass-c3-xs-perl (0.13-2+b1) ...
    Selecting previously unselected package libcpan-meta-perl.
    Preparing to unpack .../libcpan-meta-perl_2.142690-1_all.deb ...
    Unpacking libcpan-meta-perl (2.142690-1) ...
    Selecting previously unselected package libparams-util-perl.
    Preparing to unpack .../libparams-util-perl_1.07-2+b1_amd64.deb ...
    Unpacking libparams-util-perl (1.07-2+b1) ...
    Selecting previously unselected package libsub-install-perl.
    Preparing to unpack .../libsub-install-perl_0.928-1_all.deb ...
    Unpacking libsub-install-perl (0.928-1) ...
    Selecting previously unselected package libdata-optlist-perl.
    Preparing to unpack .../libdata-optlist-perl_0.109-1_all.deb ...
    Unpacking libdata-optlist-perl (0.109-1) ...
    Selecting previously unselected package libmro-compat-perl.
    Preparing to unpack .../libmro-compat-perl_0.12-1_all.deb ...
    Unpacking libmro-compat-perl (0.12-1) ...
    Selecting previously unselected package libsub-exporter-perl.
    Preparing to unpack .../libsub-exporter-perl_0.986-1_all.deb ...
    Unpacking libsub-exporter-perl (0.986-1) ...
    Selecting previously unselected package libdata-section-perl.
    Preparing to unpack .../libdata-section-perl_0.200006-1_all.deb ...
    Unpacking libdata-section-perl (0.200006-1) ...
    Selecting previously unselected package liblog-message-perl.
    Preparing to unpack .../liblog-message-perl_0.8-1_all.deb ...
    Unpacking liblog-message-perl (0.8-1) ...
    Selecting previously unselected package liblog-message-simple-perl.
    Preparing to unpack .../liblog-message-simple-perl_0.10-2_all.deb ...
    Unpacking liblog-message-simple-perl (0.10-2) ...
    Selecting previously unselected package libmodule-build-perl.
    Preparing to unpack .../libmodule-build-perl_0.421000-2_all.deb ...
    Adding 'diversion of /usr/bin/config_data to /usr/bin/config_data.diverted by libmodule-build-perl'
    Adding 'diversion of /usr/share/man/man1/config_data.1.gz to /usr/share/man/man1/config_data.diverted.1.gz by libmodule-build-perl'
    Unpacking libmodule-build-perl (0.421000-2) ...
    Selecting previously unselected package libmodule-pluggable-perl.
    Preparing to unpack .../libmodule-pluggable-perl_5.1-1_all.deb ...
    Unpacking libmodule-pluggable-perl (5.1-1) ...
    Selecting previously unselected package libmodule-signature-perl.
    Preparing to unpack .../libmodule-signature-perl_0.73-1+deb8u2_all.deb ...
    Unpacking libmodule-signature-perl (0.73-1+deb8u2) ...
    Selecting previously unselected package libpackage-constants-perl.
    Preparing to unpack .../libpackage-constants-perl_0.04-1_all.deb ...
    Unpacking libpackage-constants-perl (0.04-1) ...
    Selecting previously unselected package libpod-latex-perl.
    Preparing to unpack .../libpod-latex-perl_0.61-1_all.deb ...
    Adding 'diversion of /usr/bin/pod2latex to /usr/bin/pod2latex.bundled by libpod-latex-perl'
    Adding 'diversion of /usr/share/man/man1/pod2latex.1.gz to /usr/share/man/man1/pod2latex.bundled.1.gz by libpod-latex-perl'
    Unpacking libpod-latex-perl (0.61-1) ...
    Selecting previously unselected package libregexp-common-perl.
    Preparing to unpack .../libregexp-common-perl_2013031301-1_all.deb ...
    Unpacking libregexp-common-perl (2013031301-1) ...
    Selecting previously unselected package libpod-readme-perl.
    Preparing to unpack .../libpod-readme-perl_0.11-1_all.deb ...
    Unpacking libpod-readme-perl (0.11-1) ...
    Selecting previously unselected package libsasl2-modules:amd64.
    Preparing to unpack .../libsasl2-modules_2.1.26.dfsg1-13+deb8u1_amd64.deb ...
    Unpacking libsasl2-modules:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Selecting previously unselected package libtext-template-perl.
    Preparing to unpack .../libtext-template-perl_1.46-1_all.deb ...
    Unpacking libtext-template-perl (1.46-1) ...
    Selecting previously unselected package libsoftware-license-perl.
    Preparing to unpack .../libsoftware-license-perl_0.103010-3_all.deb ...
    Unpacking libsoftware-license-perl (0.103010-3) ...
    Selecting previously unselected package libterm-ui-perl.
    Preparing to unpack .../libterm-ui-perl_0.42-1_all.deb ...
    Unpacking libterm-ui-perl (0.42-1) ...
    Selecting previously unselected package libtext-soundex-perl.
    Preparing to unpack .../libtext-soundex-perl_3.4-1+b2_amd64.deb ...
    Unpacking libtext-soundex-perl (3.4-1+b2) ...
    Selecting previously unselected package rename.
    Preparing to unpack .../archives/rename_0.20-3_all.deb ...
    Unpacking rename (0.20-3) ...
    Selecting previously unselected package rsync.
    Preparing to unpack .../rsync_3.1.1-3_amd64.deb ...
    Unpacking rsync (3.1.1-3) ...
    Selecting previously unselected package tcpd.
    Preparing to unpack .../tcpd_7.6.q-25_amd64.deb ...
    Unpacking tcpd (7.6.q-25) ...
    Selecting previously unselected package xauth.
    Preparing to unpack .../xauth_1%3a1.0.9-1_amd64.deb ...
    Unpacking xauth (1:1.0.9-1) ...
    Selecting previously unselected package socat.
    Preparing to unpack .../socat_1.7.2.4-2_amd64.deb ...
    Unpacking socat (1.7.2.4-2) ...
    Processing triggers for systemd (215-17+deb8u4) ...
    Setting up libgdbm3:amd64 (1.8.3-13.1) ...
    Setting up libpopt0:amd64 (1.16-10) ...
    Setting up libssl1.0.0:amd64 (1.0.1t-1+deb8u2) ...
    Setting up libbsd0:amd64 (0.7.0-2) ...
    Setting up libedit2:amd64 (3.1-20140620-2) ...
    Setting up libgmp10:amd64 (2:6.0.0+dfsg-6) ...
    Setting up libnettle4:amd64 (2.7.1-5+deb8u1) ...
    Setting up libhogweed2:amd64 (2.7.1-5+deb8u1) ...
    Setting up libffi6:amd64 (3.1-2+b2) ...
    Setting up libp11-kit0:amd64 (0.20.7-1) ...
    Setting up libtasn1-6:amd64 (4.2-3+deb8u2) ...
    Setting up libgnutls-deb0-28:amd64 (3.3.8-6+deb8u3) ...
    Setting up libkeyutils1:amd64 (1.5.9-5+b1) ...
    Setting up libkrb5support0:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Setting up libk5crypto3:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Setting up libkrb5-3:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Setting up libgssapi-krb5-2:amd64 (1.12.1+dfsg-19+deb8u2) ...
    Setting up libidn11:amd64 (1.29-1+deb8u1) ...
    Setting up libsasl2-modules-db:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Setting up libsasl2-2:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Setting up libldap-2.4-2:amd64 (2.4.40+dfsg-1+deb8u2) ...
    Setting up libmagic1:amd64 (1:5.22+15-2+deb8u1) ...
    Setting up libwrap0:amd64 (7.6.q-25) ...
    Setting up perl-modules (5.20.2-3+deb8u5) ...
    Setting up perl (5.20.2-3+deb8u5) ...
    update-alternatives: using /usr/bin/prename to provide /usr/bin/rename (rename) in auto mode
    Setting up librtmp1:amd64 (2.4+20150115.gita107cef-1) ...
    Setting up libssh2-1:amd64 (1.4.3-4.1+deb8u1) ...
    Setting up libcurl3:amd64 (7.38.0-4+deb8u3) ...
    Setting up libcurl3-gnutls:amd64 (7.38.0-4+deb8u3) ...
    Setting up libexpat1:amd64 (2.1.0-6+deb8u3) ...
    Setting up libnfnetlink0:amd64 (1.0.1-3) ...
    Setting up libxau6:amd64 (1:1.0.8-1) ...
    Setting up libxdmcp6:amd64 (1:1.1.1-1+b1) ...
    Setting up libxcb1:amd64 (1.10-3+b1) ...
    Setting up libx11-data (2:1.6.2-3) ...
    Setting up libx11-6:amd64 (2:1.6.2-3) ...
    Setting up libxext6:amd64 (2:1.3.3-1) ...
    Setting up libxmuu1:amd64 (2:1.1.2-1) ...
    Setting up libmnl0:amd64 (1.0.3-5) ...
    Setting up libnetfilter-conntrack3:amd64 (1.0.4-1) ...
    Setting up libxtables10 (1.4.21-2+b1) ...
    Setting up iptables (1.4.21-2+b1) ...
    Setting up less (458-3) ...
    Setting up file (1:5.22+15-2+deb8u1) ...
    Setting up krb5-locales (1.12.1+dfsg-19+deb8u2) ...
    Setting up openssh-client (1:6.7p1-5+deb8u2) ...
    Setting up patch (2.7.5-1) ...
    Setting up openssl (1.0.1t-1+deb8u2) ...
    Setting up ca-certificates (20141019+deb8u1) ...
    Setting up conntrack (1:1.4.2-2+deb8u1) ...
    Setting up curl (7.38.0-4+deb8u3) ...
    Setting up ethtool (1:3.16-1) ...
    Setting up liberror-perl (0.17-1.1) ...
    Setting up git-man (1:2.1.4-2.1+deb8u2) ...
    Setting up git (1:2.1.4-2.1+deb8u2) ...
    Setting up libalgorithm-c3-perl (0.09-1) ...
    Setting up libarchive-extract-perl (0.72-1) ...
    Setting up libcgi-pm-perl (4.09-1) ...
    Setting up libfcgi-perl (0.77-1+b1) ...
    Setting up libcgi-fast-perl (1:2.04-1) ...
    Setting up libclass-c3-perl (0.26-1) ...
    Setting up libclass-c3-xs-perl (0.13-2+b1) ...
    Setting up libcpan-meta-perl (2.142690-1) ...
    Setting up libparams-util-perl (1.07-2+b1) ...
    Setting up libsub-install-perl (0.928-1) ...
    Setting up libdata-optlist-perl (0.109-1) ...
    Setting up libmro-compat-perl (0.12-1) ...
    Setting up libsub-exporter-perl (0.986-1) ...
    Setting up libdata-section-perl (0.200006-1) ...
    Setting up liblog-message-perl (0.8-1) ...
    Setting up liblog-message-simple-perl (0.10-2) ...
    Setting up libmodule-build-perl (0.421000-2) ...
    Setting up libmodule-pluggable-perl (5.1-1) ...
    Setting up libmodule-signature-perl (0.73-1+deb8u2) ...
    Setting up libpackage-constants-perl (0.04-1) ...
    Setting up libpod-latex-perl (0.61-1) ...
    Setting up libregexp-common-perl (2013031301-1) ...
    Setting up libpod-readme-perl (0.11-1) ...
    Setting up libsasl2-modules:amd64 (2.1.26.dfsg1-13+deb8u1) ...
    Setting up libtext-template-perl (1.46-1) ...
    Setting up libsoftware-license-perl (0.103010-3) ...
    Setting up libterm-ui-perl (0.42-1) ...
    Setting up libtext-soundex-perl (3.4-1+b2) ...
    Setting up rename (0.20-3) ...
    update-alternatives: using /usr/bin/file-rename to provide /usr/bin/rename (rename) in auto mode
    Setting up rsync (3.1.1-3) ...
    invoke-rc.d: policy-rc.d denied execution of restart.
    Setting up tcpd (7.6.q-25) ...
    Setting up xauth (1:1.0.9-1) ...
    Setting up socat (1.7.2.4-2) ...
    Processing triggers for libc-bin (2.19-18+deb8u4) ...
    Processing triggers for ca-certificates (20141019+deb8u1) ...
    Updating certificates in /etc/ssl/certs... 174 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d....done.
    Processing triggers for systemd (215-17+deb8u4) ...
    Reading package lists...
    Building dependency tree...
    Reading state information...
    The following packages will be upgraded:
      tzdata
    1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
    Need to get 185 kB of archives.
    After this operation, 1024 B of additional disk space will be used.
    Get:1 http://httpredir.debian.org/debian/ jessie-updates/main tzdata all 2016f-0+deb8u1 [185 kB]
    debconf: delaying package configuration, since apt-utils is not installed
    Fetched 185 kB in 18s (10.2 kB/s)
    (Reading database ... 11327 files and directories currently installed.)
    Preparing to unpack .../tzdata_2016f-0+deb8u1_all.deb ...
    Unpacking tzdata (2016f-0+deb8u1) over (2016d-0+deb8u1) ...
    Setting up tzdata (2016f-0+deb8u1) ...
    
    Current default time zone: 'Etc/UTC'
    Local time is now:      Sat Jul 16 07:37:08 UTC 2016.
    Universal Time is now:  Sat Jul 16 07:37:08 UTC 2016.
    Run 'dpkg-reconfigure tzdata' if you wish to change it.
    
    Reading package lists...
    Building dependency tree...
    Reading state information...
    0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
     ---> ab7b477a1437
    Removing intermediate container 658fff4eca08
    Step 3 : RUN cp /usr/bin/nsenter /nsenter
     ---> Running in f5e9a84d0b37
     ---> 6e2ef75a81f2
    Removing intermediate container f5e9a84d0b37
    Step 4 : COPY hyperkube /hyperkube
     ---> 70d6f026b794
    Removing intermediate container 1323b95ca459
    Step 5 : COPY static-pods/master.json /etc/kubernetes/manifests/
     ---> c716623e7cab
    Removing intermediate container 3880a02db75b
    Step 6 : COPY static-pods/etcd.json /etc/kubernetes/manifests/
     ---> 17a3614c85fa
    Removing intermediate container 60f40aeb8e58
    Step 7 : COPY static-pods/addon-manager.json /etc/kubernetes/manifests/
     ---> f996d9db78f7
    Removing intermediate container f55911db52df
    Step 8 : COPY static-pods/kube-proxy.json /etc/kubernetes/manifests/
     ---> 1a1425dcb938
    Removing intermediate container 1163b347be4d
    Step 9 : COPY static-pods/master-multi.json /etc/kubernetes/manifests-multi/
     ---> 23466193f693
    Removing intermediate container 9d41506101b5
    Step 10 : COPY static-pods/addon-manager.json /etc/kubernetes/manifests-multi/
     ---> 6b41d37a0120
    Removing intermediate container b87f119514a0
    Step 11 : COPY static-pods/kube-proxy.json /etc/kubernetes/manifests-multi/
     ---> 91d9a86251b1
    Removing intermediate container 846a78354b8f
    Step 12 : COPY addons /etc/kubernetes/addons
     ---> e7eed6c43bbc
    Removing intermediate container d2178cde6784
    Step 13 : COPY safe_format_and_mount /usr/share/google/safe_format_and_mount
     ---> d5a9e578fb48
    Removing intermediate container a2095e2c8c4b
    Step 14 : COPY setup-files.sh /setup-files.sh
     ---> 7774d29d0619
    Removing intermediate container f6c006e01395
    Step 15 : COPY make-ca-cert.sh /make-ca-cert.sh
     ---> a15d1b2e086b
    Removing intermediate container b7d17713c1c2
    Step 16 : COPY copy-addons.sh /copy-addons.sh
     ---> ca0bcb811603
    Removing intermediate container 26a3daf963f6
    Step 17 : ADD https://storage.googleapis.com/kubernetes-release/easy-rsa/easy-rsa.tar.gz /root/kube/
    Downloading [==================================================>] 43.44 kB/43.44 kB
     ---> db2319c69fc6
    Removing intermediate container 7baf6afb6c0d
    Step 18 : COPY cni /opt/cni
     ---> 3e4afcc79142
    Removing intermediate container 04a8820ceded
    Step 19 : COPY cni-conf /etc/cni/net.d
     ---> 511fb58fd7a6
    Removing intermediate container fb5ccf06fc8f
    Successfully built 511fb58fd7a6

Result

    [vagrant@localhost hyperkube]$ docker images
    REPOSITORY                                                    TAG                           IMAGE ID            CREATED             VIRTUAL SIZE
    gcr.io/google_containers/hyperkube-amd64                      v1.4.0-ci                     511fb58fd7a6        3 minutes ago       408.4 MB
    kube-build                                                    build-39e6d913eb              6c6f4b64ab02        5 hours ago         2.329 GB
    
    ...

Start Kubernetes
----------------






Final

    [vagrant@localhost kubernetes]$ kubectl version
    Client Version: version.Info{Major:"1", Minor:"4+", GitVersion:"v1.4.0-alpha.1.209+03be7117a486c4", GitCommit:"03be7117a486c49dab54d8daf929f7cf7d198a3a", GitTreeState:"clean", BuildDate:"2016-07-16T10:18:22Z", GoVersion:"go1.6.2", Compiler:"gc", Platform:"linux/amd64"}
    Server Version: version.Info{Major:"1", Minor:"4+", GitVersion:"v1.4.0-alpha.1.209+03be7117a486c4", GitCommit:"03be7117a486c49dab54d8daf929f7cf7d198a3a", GitTreeState:"clean", BuildDate:"2016-07-16T01:36:26Z", GoVersion:"go1.6.2", Compiler:"gc", Platform:"linux/amd64"}

    [vagrant@localhost kubernetes]$ kubectl get svc,rc,pod,petset,replicaset,deployments,daemonset,pv,pvc --all-namespaces
    NAMESPACE     NAME                                     CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE
    default       svc/kubernetes                           10.3.0.1     <none>        443/TCP    38m
    NAMESPACE     NAME                                     READY        STATUS        RESTARTS   AGE
    kube-system   po/kube-apiserver-172.17.4.50            1/1          Running       7          38m
    kube-system   po/kube-controller-manager-172.17.4.50   1/1          Running       7          38m
    kube-system   po/kube-proxy-172.17.4.50                1/1          Running       0          38m
    kube-system   po/kube-scheduler-172.17.4.50            1/1          Running       0          35m


Addons

    [vagrant@localhost addons-v1.3]$ kubectl create -f kube-system.json 
    Error from server: error when creating "kube-system.json": namespaces "kube-system" already exists
    
    [vagrant@localhost addons-v1.3]$ kubectl create -f kube-dns-rc.json 
    replicationcontroller "kube-dns-v15" created
    [vagrant@localhost addons-v1.3]$ kubectl create -f kube-dns-svc.json 
    service "kube-dns" created
    
    [vagrant@localhost addons-v1.3]$ kubectl create -f kube-dashboard-rc.json 
    replicationcontroller "kubernetes-dashboard-v1.1.0" created
    [vagrant@localhost addons-v1.3]$ kubectl create -f kube-dashboard-svc.json 
    You have exposed your service on an external port on all nodes in your
    cluster.  If you want to expose this service to the external internet, you may
    need to set up firewall rules for the service port(s) (tcp:30000) to serve traffic.
    
    See http://releases.k8s.io/HEAD/docs/user-guide/services-firewalls.md for more details.
    service "kubernetes-dashboard" created
    
    [vagrant@localhost addons-v1.3]$ kubectl create -f heapster-de.json 
    deployment "heapster-v1.1.0" created
    [vagrant@localhost addons-v1.3]$ kubectl create -f heapster-svc.json 
    service "heapster" created
    
    [vagrant@localhost addons-v1.3]$ kubectl get svc,rc,pod,petset,replicaset,deployments,daemonset,pv,pvc --all-namespaces
    NAMESPACE     NAME                                     CLUSTER-IP   EXTERNAL-IP   PORT(S)         AGE
    default       svc/kubernetes                           10.3.0.1     <none>        443/TCP         1h
    kube-system   svc/heapster                             10.3.0.115   <none>        80/TCP          4m
    kube-system   svc/kube-dns                             10.3.0.10    <none>        53/UDP,53/TCP   29m
    kube-system   svc/kubernetes-dashboard                 10.3.0.11    <nodes>       80/TCP          25m
    NAMESPACE     NAME                                     DESIRED      CURRENT       AGE
    kube-system   rc/kube-dns-v15                          1            1             29m
    kube-system   rc/kubernetes-dashboard-v1.1.0           1            1             27m
    NAMESPACE     NAME                                     READY        STATUS        RESTARTS   AGE
    kube-system   po/heapster-v1.1.0-3647315203-229qf      2/2          Running       0          4m
    kube-system   po/kube-apiserver-172.17.4.50            1/1          Running       7          1h
    kube-system   po/kube-controller-manager-172.17.4.50   1/1          Running       7          1h
    kube-system   po/kube-dns-v15-xre1w                    3/3          Running       0          29m
    kube-system   po/kube-proxy-172.17.4.50                1/1          Running       0          1h
    kube-system   po/kube-scheduler-172.17.4.50            1/1          Running       0          1h
    kube-system   po/kubernetes-dashboard-v1.1.0-e6cg2     1/1          Running       0          27m
    NAMESPACE     NAME                                     DESIRED      CURRENT       AGE
    kube-system   rs/heapster-v1.1.0-3481640137            0            0             4m
    kube-system   rs/heapster-v1.1.0-3647315203            1            1             4m
    NAMESPACE     NAME                                     DESIRED      CURRENT       UP-TO-DATE   AVAILABLE   AGE
    kube-system   deploy/heapster-v1.1.0                   1            1             1            1           4m

Health

    [vagrant@localhost addons-v1.3]$ kubectl get cs 
    NAME                 STATUS    MESSAGE              ERROR
    scheduler            Healthy   ok                   
    controller-manager   Healthy   ok                   
    etcd-0               Healthy   {"health": "true"}   

    [vagrant@localhost addons-v1.3]$ kubectl get nodes 
    NAME                    STATUS    AGE
    no/172.17.4.50          Ready     1h
